#!/usr/bin/env bash

__dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

get_help() {
    echo "A tool to help schedule studies
    It considers a study period one hour and you cannot study in a row.

    Usage:

    $0 -d 'clean code' 'I studied X Y Z' to mark a session of clean code as done
    $0 --list-subjects                   to list all subjects
    $0 --edit-subjects
    $0 --summary
    "
}

[[ "$@" =~ "--help" ]] || [[ "$@" =~ "-h" ]]&& {
    get_help
    exit
}

[[ "$1"  == "-d" ]] && {
    echo "$( date "+%Y-%m-%d %H:%M:%S")|$2|$3" >> ~/.scheduler_history
    exit
}

[[ "$1"  == "--summary" ]] && {
    echo "Done Today: "$($__dir/gateway.sh done_today | wc -l)
    echo "Done Week: "$($__dir/gateway.sh done_week | wc -l)
    exit
}

[[ "$1"  == "--list-subjects" ]] && {
    $__dir/gateway.sh list_subjects_names
    exit
}

[[ "$1"  == "--edit-subjects" ]] && {
    vim ~/.scheduler
    exit
}

$__dir/scheduler.py
